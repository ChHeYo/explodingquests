{% extends "base.html" %}
{% load staticfiles %}
{% load bootstrap %}

{% block title %}
    {{ block.super }} - Post
{% endblock title %}

{% block stylesheets %}
    {{ block.super }}
    <!-- for padding top -->
    <link rel='stylesheet' type='text/css' href="{% static 'css/profile_page.css' %}">
    <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
{% endblock stylesheets %}

{% block content %}
    <div class='container'>
        <div class='row'>
            <div class='col-md-offset-2 col-md-8'>
                <form method='POST'>
                    {% csrf_token %}
                        {{ form.non_field_errors }}
                        <div class="form-group">
                            {{ form.title.label_tag }}<br/>
                            {{ form.title }}
                            {{ form.title.errors }}
                        </div>
                        <div class="form-group">
                            {{ form.description.label_tag }}<br/>
                            {{ form.description }}
                            {{ form.description.errors }}
                        </div>
                        <div class="form-group" id='quest_form'>
                            {{ form.reward_type.label_tag }}<br/>
                            {{ form.reward_type }}
                            {{ form.reward_type.errors }}
                        </div>
                        <div class='form-group' id="non_mon_reward_field" style="display:none;">
                            {{ form.non_mon_rewards.label_tag }}<br/>
                            {{ form.non_mon_rewards }}
                            {{ form.non_mon_rewards.errors }} 
                        </div>
                        <div id='reward_field'>
                            <div class='row'>
                                <div class='col-md-9'>
                                    <div class="form-group" id="reward_field">
                                        {{ form.mon_reward.label_tag }}<br/>
                                        <div class='input-group'>
                                            <div class='input-group-addon'>
                                                <span class='glyphicon glyphicon-usd'></span>
                                            </div>
                                            {{ form.mon_reward }}
                                        </div>
                                        {{ form.mon_reward.errors }}
                                    </div>
                                </div>
                                <div class='col-md-3'>
                                    <div class="form-group">
                                        {{ form.mon_reward_rate.label_tag }}<br/>
                                        {{ form.mon_reward_rate }}
                                        {{ form.mon_reward_rate.errors }}
                                    </div>
                                </div>
                            </div>
                        </div>
                            <div class="form-group">
                                {{ form.explosion_datetime.label_tag }}<br/>
                                <div class='input-group'>
                                    <div class="input-group-addon">
                                        <span class='glyphicon glyphicon-calendar'></span>
                                    </div>
                                    {{ form.explosion_datetime }}
                                </div>
                                {{ form.explosion_datetime.errors }}
                            </div>
                    <input class='btn btn-success btn-block post-btn' type='submit' value='POST'>
                </form>
            </div>
        </div>
    </div>
{% endblock %}

{% block javascript %}
    {{ block.super }}
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <script>
        $(document).ready(function(){
            $("#id_reward_type").change(function(){
                if ($(this).val() != "Non-monetary"){
                    $("#reward_field").show();
                    $("#non_mon_reward_field").hide();
                } else {
                    $("#reward_field").hide();
                    $("#non_mon_reward_field").show();
                }
            });
            $("#id_explosion_datetime").datepicker();
        });
    </script>
{% endblock javascript %}